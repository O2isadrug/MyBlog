webpackJsonp([9],{"/q1q":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e={name:"Discuss",props:{articleInfo:Object,msg:String},data:function(){return{discuss:""}},created:function(){console.log(this.articleInfo),console.log(this.msg)}},a={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"discuss"},[i("div",{staticClass:"main"},[i("div",{staticClass:"d-title"},[t._v("评论")]),t._v(" "),i("div",{staticClass:"content"},[i("el-input",{attrs:{"show-word-limit":"",type:"textarea",maxlength:"100",placeholder:"添加评论,最多100个字"},model:{value:t.discuss,callback:function(s){t.discuss="string"==typeof s?s.trim():s},expression:"discuss"}}),t._v(" "),i("div",{staticClass:"d-twoBlock"}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("评论")])],1)])])},staticRenderFns:[]};var n={name:"Details",data:function(){return{url:"/article",article_info:{},article_id:0,prev_page:"上一篇",next_page:"下一篇",discuss:"",discuss_group:[]}},components:{Discuss:i("C7Lr")(e,a,!1,function(t){i("4rRf")},"data-v-63b7b030",null).exports},created:function(){this.getArticleId(),this.queryCommentByArticleId()},updated:function(){},destroyed:function(){this.addLikes()},methods:{getArticleId:function(){var t=this;this.article_id=Number(this.$route.query.article_id),this.$axios.get(this.url+"/articleById/"+this.article_id).then(function(s){200==s.data.code?t.article_info=s.data.body:t.$message({message:s.data.message,type:"warning"})})},addLikes:function(){this.$axios.get(this.url+"/updateLikes/"+this.article_info.id).then(function(t){200==t.data.code?console.log("芜湖~起飞~"):console.log(t.data.message)})},prevArticle:function(){var t=this;this.article_id=this.article_id+1,this.$axios.get(this.url+"/articleById/"+this.article_id).then(function(s){200==s.data.code?(t.article_info=s.data.body,t.addLikes(),t.discuss_group=[],t.queryCommentByArticleId()):t.$message({message:s.data.message,type:"warning"})})},nextArticle:function(){var t=this;this.article_id=this.article_id-1,this.$axios.get(this.url+"/articleById/"+this.article_id).then(function(s){200==s.data.code?(t.article_info=s.data.body,t.addLikes(),t.discuss_group=[],t.queryCommentByArticleId()):t.$message({message:s.data.message,type:"warning"})})},addComment:function(){var t=this;if(""!=this.$store.state.login_phone||""!=this.$store.state.login_name){var s={articleId:this.article_info.id,original_author:this.article_info.author,answerer_phone:this.$store.state.login_phone,answerer_username:this.$store.state.login_name,comment_content:this.discuss};this.$axios.post("/comment/addComment",s).then(function(s){200==s.data.code?(t.$message({message:s.data.message,type:"success"}),t.queryCommentByArticleId(),t.discuss=""):t.$message({message:s.data.message,type:"warning"})})}else this.$message.error("请先登录再评论哦"),this.$router.push("/login")},queryCommentByArticleId:function(){var t=this;this.$axios.get("/comment/queryCommentByArticleId/"+this.article_id).then(function(s){200==s.data.code?t.discuss_group=s.data.body:t.$message({message:s.data.message,type:"warning"})})}}},c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"details"},[i("div",{staticClass:"main"},[i("div",{staticClass:"content"},[i("div",{staticClass:"article-title"},[t._v(t._s(t.article_info.article_title))]),t._v(" "),i("div",{staticClass:"d-fourBlock"}),t._v(" "),i("div",{staticClass:"info display-flex"},[i("span",{staticClass:"type"},[t._v(t._s(t.article_info.article_type))]),t._v(" "),i("span",{staticClass:"time"},[i("i",{staticClass:"el-icon-date"}),t._v(" "+t._s(t.article_info.update_date))]),t._v(" "),i("span",{staticClass:"author"},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(" "+t._s(t.article_info.author))]),t._v(" "),i("span",{staticClass:"classify"},[i("i",{staticClass:"el-icon-folder-opened"}),t._v(" "+t._s(t.article_info.article_categories))]),t._v(" "),i("span",{staticClass:"view"},[i("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t.article_info.likes))])]),t._v(" "),i("div",{staticClass:"d-fourBlock"}),t._v(" "),i("div",{staticClass:"thanks"},[t._v("休对故人思故国，且将新火试新茶。诗酒趁年华。")]),t._v(" "),i("div",{staticClass:"d-fourBlock"}),t._v(" "),i("div",{staticClass:"article-content",domProps:{innerHTML:t._s(t.article_info.article_content)}}),t._v(" "),i("div",{staticClass:"d-fourBlock"}),t._v(" "),i("div",{staticClass:"prev-next display-flex"},[i("div",{staticClass:"prev",on:{click:t.prevArticle}},[t._v(t._s(t.prev_page))]),t._v(" "),i("div",{staticClass:"next",on:{click:t.nextArticle}},[t._v(t._s(t.next_page))])]),t._v(" "),i("div",{staticClass:"finish"},[t._v("完")])])]),t._v(" "),i("div",{staticClass:"discuss"},[i("div",{staticClass:"main"},[i("div",{staticClass:"d-title"},[t._v("评论")]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"discuss-top"},[i("el-input",{attrs:{"show-word-limit":"",type:"textarea",maxlength:"100",placeholder:"添加评论,最多100个字.请大家讲文明"},model:{value:t.discuss,callback:function(s){t.discuss="string"==typeof s?s.trim():s},expression:"discuss"}}),t._v(" "),i("div",{staticClass:"d-twoBlock"}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addComment}},[t._v("评论")])],1),t._v(" "),i("div",{staticClass:"discuss-bottom"},t._l(t.discuss_group,function(s,e){return i("div",{key:s.index,staticClass:"discuss-inner display-flex"},[i("div",{staticClass:"discuss-username"},[i("span",[t._v(t._s(s.answerer_username))]),t._v(" 说：")]),t._v(" "),i("div",{staticClass:"discuss-commentContent"},[t._v(t._s(s.comment_content))]),t._v(" "),i("div",{staticClass:"discuss-time"},[t._v(t._s(s.comment_date))])])}),0)])])])])},staticRenderFns:[]};var r=i("C7Lr")(n,c,!1,function(t){i("dQZr")},"data-v-53567be2",null);s.default=r.exports},"4rRf":function(t,s){},dQZr:function(t,s){}});
//# sourceMappingURL=9.fc3ed90f140ee2f5728e.js.map